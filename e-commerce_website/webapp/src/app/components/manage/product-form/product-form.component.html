<div class="container mt-5">
  <div class="card shadow-lg p-4">
   
    @if(id){
      <h2>Update Product</h2>
    }@else{
      <h2>Add New Product</h2>
    }

    <form [formGroup]="productForm" class="row g-3">

      <!-- Category & Brand Selection -->
      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Category</mat-label>
          <mat-select formControlName="categoryId">
            <mat-option *ngFor="let item of categories" [value]="item._id">
              {{ item.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Brand</mat-label>
          <mat-select formControlName="brandId">
            <mat-option *ngFor="let item of brands" [value]="item._id">
              {{ item.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Input Fields -->
      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Name</mat-label>
          <input matInput type="text" formControlName="name" />
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Short Description</mat-label>
          <input matInput type="text" formControlName="shortDescription" />
        </mat-form-field>
      </div>

      <div class="col-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Description</mat-label>
          <textarea matInput rows="4" formControlName="description"></textarea>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Price</mat-label>
          <input matInput type="number" formControlName="price" />
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Discount</mat-label>
          <input matInput type="number" formControlName="discount" />
        </mat-form-field>
      </div>

      <div class="w-full flex gap-8">
        <mat-checkbox formControlName="isFeatured">Is Featured</mat-checkbox>
        <mat-checkbox  formControlName="isNewProducts">Is New</mat-checkbox>
      </div>

      <!-- Images Section -->
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h5>Images</h5>
          <div class="d-flex gap-3"> 
            <button mat-raised-button color="primary" (click)="addImage()">Add Image</button>
            <button mat-raised-button color="warn" (click)="removeImage()">Remove Image</button>
          </div>
        </div>
      
        <div formArrayName="images">
          <div *ngFor="let item of images.controls; let i = index">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Image {{ i + 1 }}</mat-label>
              <input matInput type="text" [formControlName]="i" placeholder="Enter Image URL"/>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="col-12 text-center d-flex flex-column align-items-center gap-3">
        @if(id){
          <button mat-raised-button color="primary" class="w-40" [disabled]="productForm.invalid" (click)="updateProduct()">
            Update
          </button>
        } @else {
          <button mat-raised-button color="primary" class="w-40" [disabled]="productForm.invalid" (click)="addProduct()">
            Add to Product
          </button>
        }
      
        <!-- Back Button with Styling -->
        <button mat-raised-button color="warn" class="w-40" (click)="navigateBack()">
          â¬… Back to Products
        </button>
      </div>
      
      

    </form>
  </div>
</div>
